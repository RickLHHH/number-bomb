# ğŸš€ æ•°å­—ç‚¸å¼¹ - å…¬ç½‘éƒ¨ç½²æŒ‡å—

è®©æ¸¸æˆå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œéšæ—¶éšåœ°å’Œæœ‹å‹å¯¹æˆ˜ï¼

## ğŸ“‹ éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | éš¾åº¦ | æˆæœ¬ | ç¨³å®šæ€§ | é€‚åˆåœºæ™¯ |
|------|------|------|--------|----------|
| [Railway](#æ–¹æ¡ˆä¸€-railway-æ¨è) | â­ ç®€å• | å…è´¹é¢åº¦ | â­â­â­ | å¿«é€Ÿéƒ¨ç½²ï¼Œé•¿æœŸè¿è¡Œ |
| [Render](#æ–¹æ¡ˆäºŒ-render) | â­ ç®€å• | å…è´¹ | â­â­ | ç®€å•å¿«é€Ÿï¼Œç¾å›½èŠ‚ç‚¹ |
| [äº‘æœåŠ¡å™¨](#æ–¹æ¡ˆä¸‰-äº‘æœåŠ¡å™¨) | â­â­â­ ä¸­ç­‰ | ä»˜è´¹ | â­â­â­â­â­ | å›½å†…è®¿é—®ï¼Œå®Œå…¨æ§åˆ¶ |
| [å†…ç½‘ç©¿é€](#æ–¹æ¡ˆå››-å†…ç½‘ç©¿é€-ä¸´æ—¶) | â­â­ è¾ƒç®€å• | å…è´¹ | â­ | ä¸´æ—¶æµ‹è¯•ï¼Œå¿«é€Ÿä½“éªŒ |

---

## æ–¹æ¡ˆä¸€ï¼šRailwayï¼ˆæ¨èï¼‰

Railway æä¾›å…è´¹é¢åº¦ï¼Œæ”¯æŒè‡ªå®šä¹‰åŸŸåï¼Œéƒ¨ç½²ç®€å•ã€‚

### æ­¥éª¤

1. **Fork æˆ–å‡†å¤‡ä»£ç **
   - å°†ä»£ç ä¸Šä¼ åˆ° GitHub ä»“åº“

2. **ç™»å½• Railway**
   - è®¿é—® [railway.app](https://railway.app)
   - ä½¿ç”¨ GitHub è´¦å·ç™»å½•

3. **åˆ›å»ºé¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© "Deploy from GitHub repo"
   - é€‰æ‹©ä½ çš„ä»“åº“

4. **éƒ¨ç½²**
   - Railway ä¼šè‡ªåŠ¨è¯†åˆ« `railway.json` é…ç½®
   - ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰

5. **è·å–åŸŸå**
   - éƒ¨ç½²å®Œæˆåï¼Œç‚¹å‡»é¡¹ç›®è¿›å…¥ Dashboard
   - åœ¨ Settings ä¸­å¯ä»¥çœ‹åˆ°åˆ†é…çš„åŸŸå
   - ä¾‹å¦‚ï¼š`https://number-bomb-game-production.up.railway.app`

6. **åˆ†äº«æ¸¸æˆ**
   - å°†è¿™ä¸ªé“¾æ¥å‘ç»™æœ‹å‹å³å¯ä¸€èµ·ç©ï¼

### æ³¨æ„äº‹é¡¹
- å…è´¹ç”¨æˆ·æ¯æœˆæœ‰ $5 é¢åº¦é™åˆ¶
- ä¸€æ®µæ—¶é—´ä¸è®¿é—®ä¼šè¿›å…¥ä¼‘çœ ï¼Œé¦–æ¬¡è®¿é—®éœ€è¦ç­‰å¾…å‡ ç§’å”¤é†’

---

## æ–¹æ¡ˆäºŒï¼šRender

Render æä¾›å…è´¹çš„ Web Service æ‰˜ç®¡ã€‚

### æ­¥éª¤

1. **Fork ä»£ç åˆ° GitHub**

2. **ç™»å½• Render**
   - è®¿é—® [render.com](https://render.com)
   - ä½¿ç”¨ GitHub ç™»å½•

3. **åˆ›å»º Web Service**
   - ç‚¹å‡» "New +" â†’ "Web Service"
   - é€‰æ‹©ä½ çš„ GitHub ä»“åº“

4. **é…ç½®**
   - Name: `number-bomb-game`
   - Runtime: `Docker`
   - å…¶ä»–ä¿æŒé»˜è®¤

5. **åˆ›å»º**
   - ç‚¹å‡» "Create Web Service"
   - ç­‰å¾…éƒ¨ç½²å®Œæˆ

6. **è·å–é“¾æ¥**
   - éƒ¨ç½²å®Œæˆåä¼šè·å¾— `xxx.onrender.com` åŸŸå

---

## æ–¹æ¡ˆä¸‰ï¼šäº‘æœåŠ¡å™¨ï¼ˆå›½å†…æ¨èï¼‰

ä½¿ç”¨é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰å›½å†…äº‘æœåŠ¡å™¨ï¼Œè®¿é—®é€Ÿåº¦æœ€å¿«ã€‚

### æ¨èé…ç½®
- **å…¥é—¨çº§**: 1æ ¸1GB å†…å­˜ï¼ˆçº¦ 30-50 å…ƒ/æœˆï¼‰
- **ç³»ç»Ÿ**: Ubuntu 20.04/22.04 LTS

### éƒ¨ç½²æ­¥éª¤

1. **è´­ä¹°æœåŠ¡å™¨å¹¶ç™»å½•**
```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

2. **å®‰è£… Node.js 18**
```bash
# å®‰è£… Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# éªŒè¯å®‰è£…
node -v  # åº”æ˜¾ç¤º v18.x.x
npm -v
```

3. **ä¸Šä¼ ä»£ç **
```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ git
git clone https://github.com/ä½ çš„ç”¨æˆ·å/number-bomb.git
cd number-bomb

# æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ä¸Šä¼ åè§£å‹
# ä½¿ç”¨ scp æˆ– FTP ä¸Šä¼  zip æ–‡ä»¶
```

4. **å®‰è£…ä¾èµ–å¹¶å¯åŠ¨**
```bash
npm install

# ä½¿ç”¨ PM2 åå°è¿è¡Œï¼ˆæ¨èï¼‰
npm install -g pm2
pm2 start server.js --name "number-bomb"

# æˆ–è€…ç›´æ¥ç”¨ node è¿è¡Œï¼ˆå…³é—­ç»ˆç«¯ä¼šåœæ­¢ï¼‰
# npm start
```

5. **é…ç½®é˜²ç«å¢™**
```bash
# å¼€æ”¾ 3000 ç«¯å£ï¼ˆæˆ–ä½ è‡ªå®šä¹‰çš„ç«¯å£ï¼‰
sudo ufw allow 3000/tcp

# å¦‚æœä½¿ç”¨é˜¿é‡Œäº‘/è…¾è®¯äº‘ï¼Œè¿˜éœ€è¦åœ¨æ§åˆ¶å°å®‰å…¨ç»„ä¸­å¼€æ”¾ç«¯å£
```

6. **è®¿é—®æ¸¸æˆ**
```
http://ä½ çš„æœåŠ¡å™¨IP:3000
```

### è¿›é˜¶ï¼šä½¿ç”¨ Nginx åå‘ä»£ç† + åŸŸå

å¦‚æœä½ æƒ³ä½¿ç”¨åŸŸåï¼ˆå¦‚ `game.yourdomain.com`ï¼‰å’Œ HTTPSï¼š

```bash
# å®‰è£… Nginx
sudo apt install nginx

# ç¼–è¾‘é…ç½®æ–‡ä»¶
sudo nano /etc/nginx/sites-available/number-bomb
```

æ·»åŠ é…ç½®ï¼š
```nginx
server {
    listen 80;
    server_name game.yourdomain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        
        # WebSocket æ”¯æŒ
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

å¯ç”¨é…ç½®ï¼š
```bash
sudo ln -s /etc/nginx/sites-available/number-bomb /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx

# é…ç½® SSLï¼ˆLet's Encryptï¼‰
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d game.yourdomain.com
```

---

## æ–¹æ¡ˆå››ï¼šå†…ç½‘ç©¿é€ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰

é€‚åˆä¸´æ—¶æµ‹è¯•ï¼Œæ— éœ€è´­ä¹°æœåŠ¡å™¨ã€‚

### ä½¿ç”¨ ngrokï¼ˆæ¨èï¼‰

1. **æ³¨å†Œå¹¶ä¸‹è½½ ngrok**
   - è®¿é—® [ngrok.com](https://ngrok.com)
   - æ³¨å†Œè´¦å·ï¼Œè·å– Authtoken

2. **å®‰è£…å¹¶é…ç½®**
```bash
# Mac
brew install ngrok

# Windows
# ä¸‹è½½ exe å¹¶æ·»åŠ åˆ° PATH

# Linux
wget https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz
tar xvzf ngrok-v3-stable-linux-amd64.tgz
sudo mv ngrok /usr/local/bin/
```

3. **é…ç½® Authtoken**
```bash
ngrok config add-authtoken ä½ çš„token
```

4. **å¯åŠ¨æ¸¸æˆæœåŠ¡å™¨**
```bash
cd number-bomb
npm start
```

5. **å¼€å¯å†…ç½‘ç©¿é€**
```bash
ngrok http 3000
```

6. **è·å–å…¬ç½‘é“¾æ¥**
   - ngrok ä¼šæ˜¾ç¤ºç±»ä¼¼ `https://xxxx.ngrok-free.app` çš„é“¾æ¥
   - å°†è¿™ä¸ªé“¾æ¥å‘ç»™æœ‹å‹å³å¯ï¼

### ä½¿ç”¨ cpolarï¼ˆå›½å†…æ›¿ä»£ï¼‰

å¦‚æœ ngrok å›½å†…è®¿é—®æ…¢ï¼Œå¯ä»¥ç”¨ cpolarï¼š

```bash
# å®‰è£…
curl -L https://www.cpolar.com/static/downloads/install-release-cpolar.sh | sudo bash

# ç™»å½•ï¼ˆéœ€å…ˆåœ¨ç½‘ç«™æ³¨å†Œï¼‰
cpolar authtoken ä½ çš„token

# å¼€å¯éš§é“
cpolar http 3000
```

---

## ğŸ³ Docker éƒ¨ç½²

å¦‚æœä½ ç†Ÿæ‚‰ Dockerï¼Œå¯ä»¥ç”¨å®¹å™¨æ–¹å¼éƒ¨ç½²ï¼š

```bash
# æ„å»ºé•œåƒ
docker build -t number-bomb .

# è¿è¡Œå®¹å™¨
docker run -d -p 3000:3000 --name number-bomb-game number-bomb

# æŸ¥çœ‹æ—¥å¿—
docker logs -f number-bomb-game

# åœæ­¢
docker stop number-bomb-game
```

### Docker Composeï¼ˆæ¨èï¼‰

åˆ›å»º `docker-compose.yml`ï¼š

```yaml
version: '3.8'

services:
  number-bomb:
    build: .
    container_name: number-bomb-game
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - PORT=3000
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:3000/"]
      interval: 30s
      timeout: 10s
      retries: 3
```

è¿è¡Œï¼š
```bash
docker-compose up -d
docker-compose logs -f
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### WebSocket è¿æ¥å¤±è´¥

1. **æ£€æŸ¥é˜²ç«å¢™**
   - ç¡®ä¿æœåŠ¡å™¨é˜²ç«å¢™å·²å¼€æ”¾å¯¹åº”ç«¯å£
   - äº‘æœåŠ¡å™¨éœ€è¦åœ¨å®‰å…¨ç»„ä¸­æ”¾è¡Œç«¯å£

2. **æ£€æŸ¥ HTTPS**
   - å¦‚æœç½‘é¡µæ˜¯ HTTPSï¼ŒWebSocket å¿…é¡»ä½¿ç”¨ WSS
   - ç¡®ä¿æœåŠ¡å™¨é…ç½®äº† SSLï¼ˆæˆ–ä½¿ç”¨å¹³å°çš„è‡ªåŠ¨ SSLï¼‰

3. **æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—**
```bash
# å¦‚æœä½¿ç”¨ PM2
pm2 logs number-bomb

# å¦‚æœä½¿ç”¨ Docker
docker logs number-bomb-game

# ç›´æ¥è¿è¡Œ
npm start
```

### éƒ¨ç½²åé¡µé¢ç©ºç™½

- æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£ç¡®è¿è¡Œï¼š`curl http://localhost:3000`
- æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£ç¡®æ˜ å°„
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æŠ¥é”™ä¿¡æ¯

### æˆ¿é—´åˆ›å»ºæˆåŠŸä½†æœ‹å‹æ— æ³•åŠ å…¥

- ç¡®ä¿ä½¿ç”¨çš„æ˜¯**åŒä¸€ä¸ª**é“¾æ¥
- æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- æŸäº›ä¼ä¸šç½‘ç»œå¯èƒ½ä¼šé˜»æ­¢ WebSocketï¼Œå°è¯•åˆ‡æ¢ç½‘ç»œï¼ˆå¦‚æ‰‹æœºçƒ­ç‚¹ï¼‰

---

## ğŸ“± å¿«é€Ÿå¼€å§‹æ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤éªŒè¯ï¼š

- [ ] è®¿é—®ä½ çš„å…¬ç½‘é“¾æ¥ï¼Œèƒ½çœ‹åˆ°æ¸¸æˆé¦–é¡µ
- [ ] ç‚¹å‡»"åˆ›å»ºæˆ¿é—´"ï¼ŒæˆåŠŸæ˜¾ç¤º6ä½æˆ¿é—´å·
- [ ] ç”¨å¦ä¸€å°è®¾å¤‡ï¼ˆæˆ–æ‰‹æœºæµé‡ï¼‰æ‰“å¼€ç›¸åŒé“¾æ¥
- [ ] è¾“å…¥æˆ¿é—´å·åŠ å…¥ï¼Œæˆ¿ä¸»èƒ½çœ‹åˆ°"ç©å®¶2å·²åŠ å…¥"
- [ ] åŒæ–¹è®¾ç½®æ•°å­—åï¼Œæ¸¸æˆæ­£å¸¸å¼€å§‹
- [ ] èƒ½æ­£å¸¸çŒœæµ‹å¹¶çœ‹åˆ°å¯¹æ–¹çš„ç»“æœ

å…¨éƒ¨é€šè¿‡ï¼Œæ­å–œä½ éƒ¨ç½²æˆåŠŸï¼ğŸ‰

---

## ğŸ’¡ æç¤º

1. **å…è´¹æœåŠ¡é™åˆ¶**
   - Railway/Render å…è´¹ç‰ˆä¼šåœ¨ä¸€æ®µæ—¶é—´ä¸æ´»åŠ¨åä¼‘çœ 
   - é¦–æ¬¡è®¿é—®å¯èƒ½éœ€è¦ç­‰å¾…å‡ ç§’å”¤é†’

2. **å›½å†…è®¿é—®ä¼˜åŒ–**
   - å¦‚æœéƒ¨ç½²åœ¨å›½å¤–ï¼Œå›½å†…è®¿é—®å¯èƒ½è¾ƒæ…¢
   - å»ºè®®ä½¿ç”¨å›½å†…äº‘æœåŠ¡å™¨æˆ–å¼€å¯ CDN

3. **æ•°æ®å®‰å…¨**
   - æœ¬æ¸¸æˆä¸å­˜å‚¨ä»»ä½•æ•°æ®ï¼Œæˆ¿é—´ä¼šåœ¨æ‰€æœ‰äººç¦»å¼€åè‡ªåŠ¨æ¸…ç†
   - ä¸è¦åœ¨ä¸ä¿¡ä»»çš„ç½‘ç»œä¸­è¾“å…¥æ•æ„Ÿæ•°å­—

4. **æ›´å¤šåŠŸèƒ½**
   - æ¬¢è¿æäº¤ Issue æˆ– PR æ·»åŠ æ–°åŠŸèƒ½
   - å»ºè®®åŠŸèƒ½ï¼šè§‚æˆ˜æ¨¡å¼ã€æ’è¡Œæ¦œã€AI å¯¹æˆ˜ç­‰
